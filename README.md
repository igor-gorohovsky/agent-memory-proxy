# Agent Memory Proxy

A unified memory management solution for AI code agents (Claude, Gemini, Cursor, etc.)

## üéØ Problem

The AI/LLM industry is evolving rapidly, and developers now have access to numerous code agents. However, each agent uses different approaches to managing "memory" (context files, project rules, etc.), making it challenging to maintain unified project memory across different tools.

## üí° Solution

Agent Memory Proxy provides a "proxy" layer that automatically synchronizes a single memory file with various agent-specific formats. You maintain one `AGENT.md` file, and the proxy handles the adaptation to different agent formats automatically.

## ‚ú® Key Features

- **Single Source of Truth**: Maintain one memory file that syncs to all agents
- **Automatic Synchronization**: File watcher detects changes and updates agent-specific files
- **Multi-Agent Support**: Works with Claude, Gemini, Cursor, and easily extensible to others
- **Linux/Ubuntu Focused**: Optimized for Linux environments
- **Lightweight**: Minimal dependencies, runs in the background
- **Git-Friendly**: Generated files can be gitignored to avoid conflicts

## üìã Requirements

- Linux/Ubuntu operating system
- Python 3.9+
- uv (Python package manager) - [Installation guide](https://github.com/astral-sh/uv)

## üöÄ Quick Start

### 1. Installation

#### Option 1: Using uv (Recommended)

```bash
# Clone the repository
git clone https://github.com/igor-gorohovsky/agent-memory-proxy.git
cd agent-memory-proxy

# Install uv if you haven't already
curl -LsSf https://astral.sh/uv/install.sh | sh

# Install dependencies
uv sync

# Run the proxy
uv run amp
```

#### Option 2: Using pip

```bash
# Clone the repository
git clone https://github.com/igor-gorohovsky/agent-memory-proxy.git
cd agent-memory-proxy

# Install from pyproject.toml
pip install .

# Or install in development mode
pip install -e .
```

### 2. Configuration

Create a `.amp.yaml` file in your project directory:

```yaml
respect_gitignore: true
truth_memory_file: "AGENT.md"
agents:
  - claude
  - gemini
  - cursor
  - copilot
```

### 3. Set Environment Variable

Add directories to watch (separated by colon):

```bash
export AGENT_MEMORY_PATHS="/home/user/projects:/home/user/work/specific_project"
```

### 4. Update .gitignore

Add agent-specific files to `.gitignore`:

```gitignore
# Agent-specific memory files (generated by proxy)
CLAUDE.md
GEMINI.md
.cursor/rules/project.mdc
```

### 5. Run the Proxy

Make sure to export the environment variable first:

```bash
# Set the paths to watch
export AGENT_MEMORY_PATHS="/path/to/your/projects"

# Run the proxy
uv run amp
```

## üñ•Ô∏è Linux Setup

#### Option 1: systemd (Recommended)

**Note**: Ensure uv is installed and run `uv sync` in the project directory first.

1. Create `/etc/systemd/system/agent-memory-proxy.service`:
   ```ini
   [Unit]
   Description=Agent Memory Proxy
   After=network.target

   [Service]
   Type=simple
   User=yourusername
   Environment="AGENT_MEMORY_PATHS=/home/yourusername/projects"
   WorkingDirectory=/path/to/agent-memory-proxy
   ExecStart=/home/yourusername/.cargo/bin/uv run amp
   Restart=always

   [Install]
   WantedBy=multi-user.target
   ```

2. Enable and start:
   ```bash
   sudo systemctl enable agent-memory-proxy
   sudo systemctl start agent-memory-proxy
   ```

#### Option 2: cron
```bash
crontab -e
# Add:
@reboot cd /path/to/agent-memory-proxy && AGENT_MEMORY_PATHS="/home/user/projects" /home/user/.cargo/bin/uv run amp
```


## üìÅ Example Project Structure

```
my-project/
‚îú‚îÄ‚îÄ .amp.yaml                   # Configuration
‚îú‚îÄ‚îÄ AGENT.md                    # Your single source of truth
‚îú‚îÄ‚îÄ CLAUDE.md                   # Generated (gitignored)
‚îú‚îÄ‚îÄ GEMINI.md                   # Generated (gitignored)
‚îú‚îÄ‚îÄ .cursor/
‚îÇ   ‚îî‚îÄ‚îÄ rules/
‚îÇ       ‚îî‚îÄ‚îÄ project.mdc         # Generated (gitignored)
‚îî‚îÄ‚îÄ .gitignore
```

## üîß Advanced Configuration

### Multiple Memory Files

You can map different source files to different targets:

```yaml
respect_gitignore: true
truth_memory_file: "AGENT.md"
agents:
  - claude
  - gemini
  - cursor
```

### Watching Multiple Projects

Set multiple paths in the environment variable (colon-separated):

```bash
export AGENT_MEMORY_PATHS="/project1:/project2:/project3"
```

## üêõ Troubleshooting

### Proxy Not Detecting Changes
- Ensure the source file exists before starting the proxy
- Check file permissions
- Verify the config file is valid YAML
- Run with `--verbose` flag for detailed logs

### Permission Errors
- Ensure you have read/write permissions for the watched directories

## ü§ù Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

### Development Setup

1. **Clone the repository**
   ```bash
   git clone https://github.com/igor-gorohovsky/agent-memory-proxy.git
   cd agent-memory-proxy
   ```

2. **Install uv**
   ```bash
   curl -LsSf https://astral.sh/uv/install.sh | sh
   ```

3. **Install development dependencies**
   ```bash
   uv sync
   ```

4. **Run tests**
   ```bash
   uv run pytest tests
   ```

5. **Run tests on all Python versions (3.9-3.13)**
   ```bash
   # Install tox
   uv tool install tox
   
   # Run lint, type check, and tests on all supported Python versions
   tox
   
   # Run specific environments (each includes lint + type check + tests)
   tox -e py39,py310,py311,py312,py313
   
   # Run only linting or type checking (single environment)
   tox -e lint,type-check
   ```

### Development Workflow

1. Create a new branch for your feature
2. Make your changes
3. Add tests for new functionality
8. Submit a pull request

## üìÆ Support

For issues, questions, or suggestions:
- Open an issue on GitHub
- Check existing issues for solutions
- Read the logs with `--verbose` flag for debugging
